!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.reflexiv=n():e.reflexiv=n()}(self,(function(){return(()=>{"use strict";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const t=()=>{var e={},n={};self.onconnect=function(t){var o=t.ports[0];o.onmessage=function(t){var a=t.data;console.log(a),"get"==a.code?o.postMessage({code:"getResult",channel:a.channel,key:a.key,data:e[a.channel][a.key]}||void 0):"set"==a.code?(a.channel in e||(e[a.channel]={}),e[a.channel][a.key]=a.value):"delete"==a.code?a.channel in e&&a.key in e[a.channel]&&delete e[a.channel][a.key]:"setState"==a.code?e[a.channel]=a.data:"getState"==a.code?(o.postMessage({code:"getStateResult",channel:a.channel,data:e[a.channel]||{}}||void 0),n[a.channel]=(n[a.channel]||0)+1):"close"==a.code&&(n[a.channel]-=1,0==n[a.channel]&&(delete e[a.channel],delete n[a.channel]))}},self._states_=e};t();const o=t;return n})()}));